@using VideoGameHash.Helpers;
@model VideoGameHash.Models.MainPageViewModel


@{
    ViewBag.Title = NewsHelper.SectionTitle(Model.Section);
}

<h2 class="sec_heading">@NewsHelper.SectionTitle(Model.Section)</h2>
    
    <ul class="nav nav-tabs" id="myTab">
        @if (Model.Source <= 0)
        {
            <li class="active"><a>All</a></li>
        }
        else
        {
            <li>@Html.ActionLink("All", "ViewArticlesN", new {Model.Section, Model.GameSystem, Model.ViewType })</li>
        }
        @foreach (var source in Model.SourceList)
        {
            var id = NewsHelper.SourceId(source);
            if (id == Model.Source)
            {
                <li class="active"><a>@source</a></li>
            }
            else
            {
                <li>@Html.ActionLink(@source, "ViewArticles", new {Model.Section, Source = id, Model.GameSystem, Model.ViewType })</li>
            }
        }
    </ul>

    <div>
        <ul class="nav nav-pills">
            @foreach (var gameSystem in Model.GameSystemList)
            {
                var id = NewsHelper.GameSystemId(gameSystem);
                if (id == Model.GameSystem)
                {
                    <li class="active"><a>@gameSystem</a></li>
                }
                else
                {
                    if (Model.Source >= 0)
                    {
                        <li>@Html.ActionLink(@gameSystem, "ViewArticles", new {Model.Section, Model.Source, GameSystem = id, Model.ViewType })</li>
                    }
                    else
                    {
                        <li>@Html.ActionLink(@gameSystem, "ViewArticlesN", new {Model.Section, GameSystem = id, Model.ViewType })</li>
                    }
                }
            }
        </ul>
    </div>
            


    @Html.Action("GetArticles", new {Model.Section, Model.Source, Model.GameSystem, Model.Search, Model.ViewType, articleIndex = Model.CurrentPage})


        

